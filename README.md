
# **WIP**

[pandasクックブック-―Pythonによるデータ処理のレシピ](https://www.amazon.co.jp/pandas%E3%82%AF%E3%83%83%E3%82%AF%E3%83%96%E3%83%83%E3%82%AF-%E2%80%95Python%E3%81%AB%E3%82%88%E3%82%8B%E3%83%87%E3%83%BC%E3%82%BF%E5%87%A6%E7%90%86%E3%81%AE%E3%83%AC%E3%82%B7%E3%83%94%E2%80%95-Theodore-Petrou/dp/425412242X) の著者の方の記事

https://medium.com/dunder-data/minimally-sufficient-pandas-a8e67f2a2428

を、許可を得て翻訳中のものです。

https://twitter.com/arc279/status/1095511875050033152




---

# Minimally Sufficient Pandas（必要最低限の Pandas）

この記事では、データ分析にpandasを使用する際の、私の最適と思う意見を提案します。
私の目的は、データ分析のほとんどのケースでは、ライブラリの一部の機能だけで十分であることを主張することです。
ここで紹介する必要十分な最低限の機能は、 pandas の初心者からプロフェッショナルまで役に立つでしょう。
誰もが私の提案に同意するわけではないでしょうが、それらは私の実際のライブラリの使い方、あるいは教えている手法です。
もし、あなたが同意しないか、別の提案があるなら、以下のコメントに残してください。
（訳注：[元記事](https://medium.com/dunder-data/minimally-sufficient-pandas-a8e67f2a2428)のコメント欄）

この記事を読み終わると

* Pandas の構文などではなく、実際のデータ分析に集中するためには、一部の機能に限定しても十分であることがわかります
* Pandas を用いた一般的な、多岐にわたるデータ分析のタスクに対する、具体的な単一アプローチの指針を持つことができます

## 100時間以上の無料のチュートリアル動画

私は、100時間以上にも及ぶ、Pandas, Matplotlib, Seaborn, そして Scikit-Learn の非常に詳細なチュートリアル動画を公開しています。（2019年の2月より）
ぜひ [Dunder Data YouTube channel](https://www.youtube.com/c/dunderdata) を購読して更新をチェックしてください。

## Upcoming Classes

よりパーソナライズされた授業が必要ならば、今年の3月に予定されている [Machine Learning Bootcamps in NYC](https://www.dunderdata.com/courses) の私の講義に参加してください。

## Pandas は強力だが扱いが難しい

Pandas はデータ分析者の間で最もポピュラーな python のライブラリです。
かなり多くの機能を提供していますが、学習コストが高いライブラリでもあります。
これにはいくつかの理由があります：

* 一般的なタスクをこなすのに複数の方法がある
* DataFrame には240を超えるメソッドと属性がある
* （基本的に同じコードを参照している）お互いのエイリアスであるメソッドがある
* ほぼ同じ機能のメソッドがある
* 同じ目的を達するのに、異なる人によって書かれたさまざまな方法によるチュートリアルが氾濫している
* 一般的なタスクを、慣用的な方法でこなす公式のガイドラインが存在しない
* 公式のドキュメントにも、慣用的でないコードが存在する

## Pandas の必要最低限の機能はなにか？

データ分析ライブラリの目的は、分析者がデータ分析に集中できるツールを提供することです。
Pandas はまさにうってつけのツールですが、分析に集中できるようにはなっていません。
代わりに、ユーザは複雑で過剰な構文を覚えることを強要されます。

私は Minimally Sufficient Pandas の定義として、以下を提案します。

* たいていの要求をこなすことができるのに十分な、ライブラリの機能の一部
* コードの書き方ではなくデータの分析に集中することができる

この Pandas の必要最低限のサブセットでは：

* 単純、明白、直接的で、退屈なコードになるだろう
* あるタスクをこなすために、ただ1つの明白な方法を選ぶだろう
* 毎回、明白な方法を選ぶだろう
* 脳内のワーキングメモリに多くのコマンドを覚えておく必要はない
* 他人やあなたにとって、より理解しやすいコードになるだろう

## よくあるタスクの標準化

Pandas はしばしば、同じタスクをこなすのに複数のアプローチを提供します。
これは、あなたの取ったアプローチが、他人のそれとは異なるかもしれないことを意味します。
これは、1列のカラムを選択する、などの最も基本的なタスクでも発生する可能性があります。
複数の異なるアプローチを採用しても、個人による単発の分析では、多くは問題にはならないでしょう。
しかし、多人数で長期間かかる分析において、それぞれが異なるアプローチを採用した場合、大混乱を引き起こす可能性があります。

一般的なタスクに対して、標準的なアプローチを採用しないことによって、各自のアプローチの僅かな違いをすべて覚えておくための、大きな認知的負荷が開発者にかかります。
各人が一般的なタスクをこなすために、それぞれの好む方法を採用することは、エラーと非効率を引き起こします。

##  Stack Overflow の雪崩

Stack Overflow で Pandas に関する質問を検索すると、よくある一般的なタスクに対して、複数の競合するさまざまな結果が得られることは、珍しくありません。
DataFrameの列名の変更に関する[この質問](https://stackoverflow.com/questions/11346283/renaming-columns-in-pandas/46912050)には28の回答があります。
あるタスクをこなすために慣用的な方法を1つ知りたい人にとって、この大量の情報に目を通すことは非常に困難です。

## No Tricks

ライブラリの大部分を削ることには、いくつかの（良い）制限があります。
あいまいな Pandas のトリックをたくさん知っていることは、あなたの友達にドヤれるかもしれませんが、たいてい良いコードに繋がることはありません。
それどころか、理解しがたく、そしてデバッグがより困難な長大なコードを生み出すでしょう。

## Pandas の具体例

では、タスクをこなすために複数のアプローチが存在する Pandas の、具体例について説明します。
異なるアプローチを比較対照して、どちらのアプローチが望ましいかについての指針を示します。

トピックは以下のとおりです：

* 単一の列のデータを選択する
* `ix` インデクサは非推奨
* `at` `iat` によるセルの選択
* `read_csv` と `read_table` は重複
* `isna` と `isnull` 、 `notna` と `notnull`
* 算術演算子および比較演算子と、それらに対応するメソッド
* python の組み込み関数と、同名の Pandas の同名のメソッド
* `groupby` による集計方法の統一
* MultiIndex の扱いかた
* `groupby` `pivot_table` `crosstab` の違い
* `pivot` と `pivot_table`
* `melt` と `stack` の類似点
* `pivot` と `unstack` の類似点

---

＜＜＜WIP＞＞＞

